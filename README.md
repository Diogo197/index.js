System.register("chunks:///_virtual/AccRechargeBaseView.ts",["cc","./ItemGrid.ts","./UILabel.ts","./UIList.ts","./NodeUtil.ts","./TimeUtil.ts","./index51.ts","./MessageView.ts","./MainViewModel.ts","./ActivityControl.ts","./ActivityDefine.ts","./BaseView.ts","./UIDefine.ts"],(function(t){"use strict";var i,e,s,n,a,o,h,d,c,l,r,f,u,v,p,C,g,m,T,L;return{setters:[function(t){i=t.Button,e=t.HorizontalTextAlignment,s=t.Label,n=t.ScrollView,a=t.cclegacy,o=t.ProgressBar,h=t.js},function(t){d=t.ItemGrid},function(t){c=t.UILabel},function(t){l=t.ListItem},function(t){r=t.default},function(t){f=t.default},null,function(t){u=t.default},function(t){v=t.MainViewModel},function(t){p=t.default},function(t){C=t.ActivityType,g=t.ActivityEventDefine,m=t.ActivityTaskState},function(t){T=t.BaseView},function(t){L=t.PanelTabType}],execute:function(){a._RF.push({},"ad3aeFb38ZA1bgbVDK14e/0","AccRechargeBaseView",void 0);t("default",class extends T{constructor(){super(),this.taskList=void 0,this.actInfo=void 0,this.curIndex=void 0,this.txtTitle=void 0,this.txtLeftTime=void 0,this.deltaTime=0,this.leftTime=0,this.canUpdate=!1,this.titleList=[],this.name="AccRechargeBaseView",this.url="ui/module/activity/AccRechargeView"}onInit(){const t=this.findChild("btnClose");this.addComponentCallbackListener(t,i.EventType.CLICK,(()=>{this.onCloseClick()}));const a=this.findChild("bg/btnRule");this.addComponentCallbackListener(a,i.EventType.CLICK,(()=>{u.showBoxTip({title:GetLanguage(201066),tip:GetLanguage(201067),btnCnt:1,horizontalAlign:e.LEFT})}));this.findChildComponent("view/tip/txtTips",s).string=GetLanguage(201087);const o=this.findChildComponent("view/taskList",n);this.taskList=this.addUIList(o,b,!0),this.txtLeftTime=this.findChildComponent("view/timeCount/txtTime",s),this.txtTitle=this.findChildComponent("title/txtTitle",c),this.curIndex=null,this.titleList=[],this.titleList[C.AccRechargeTotal]=this.findChild("title/0"),this.titleList[C.AccRechargeDay]=this.findChild("title/1"),this.titleList[C.AccRechargeDay2]=this.findChild("title/2"),this.titleList[C.AccRechargeTotal2]=this.findChild("title/3")}onCloseClick(){this.close()}registerUpdateHandler(){this.addEvent(g.OnActivityInfoTaskUpdate,this.OnTaskUpdate,this),this.addEvent(g.OnActivityInfoUpdate,this.OnTaskUpdate,this),this.addEvent(g.OnActivityTaskReward,this.OnTaskUpdate,this)}onAfterOpen(){for(const t in this.titleList)this.titleList.hasOwnProperty(t)&&(this.titleList[t].active=!1);this.onAfterOpenSub()}onAfterOpenSub(){}onBeforeClose(){}onUpdate(t){this.canUpdate&&(this.deltaTime=this.deltaTime+t,this.deltaTime>=1&&(this.deltaTime=0,this.leftTime=this.leftTime-1,this.leftTime>0?this.txtLeftTime.string=GetLanguage(200085)+f.formatTimeStringForSecond(this.leftTime):(this.txtLeftTime.string=GetLanguage(200026),this.canUpdate=!1)))}onDestroy(){}OnTaskUpdate(){this.taskList.updateAll()}RefreshScroll(){const t=[];this.taskList.datas=t;for(const i in this.actInfo.task_list)this.actInfo.task_list.hasOwnProperty(i)&&t.push(this.actInfo.task_list[i]);t.sort(((t,i)=>1==t.state&&1!=i.state?-1:1!=t.state&&1==i.state?1:t.state!=i.state?t.state-i.state:t.id-i.id)),this.taskList.datas=t,this.taskList.scrollTo(0)}});class b extends l{constructor(...t){super(...t),this.txtDesc=void 0,this.btnGet=void 0,this.received=void 0,this.btnGotoRecharge=void 0,this.pb=void 0,this.schedule=void 0,this.rewardScroll=void 0}onInit(){const t=this.view;this.txtDesc=r.findChildComponent(this.node,"txtDesc",s),this.pb=r.findChildComponent(this.node,"ProgressBar",o),this.schedule=r.findChildComponent(this.node,"ProgressBar/schedule",s),this.received=r.findChild(this.node,"received"),this.btnGotoRecharge=r.findChild(this.node,"btnGotoRecharge"),this.view.addComponentCallbackListener(this.btnGotoRecharge,i.EventType.CLICK,(()=>{IS(v).TryJumpToMainViewPanel(L.Main_Shop,L.Shop_Limit,[0])&&t.close()})),this.btnGet=r.findChild(this.node,"btnGet"),this.view.addComponentCallbackListener(this.btnGet,i.EventType.CLICK,(()=>{IS(p).send_24_15(t.actInfo.activityCfg.type,this.data.task_id,this.data.group_id)}));const e=r.findChildComponent(this.node,"ScrollView",n);this.rewardScroll=t.addUIList(e,G),this.rewardScroll.virtual=!1}onRender(t,i){this.txtDesc.string=t.cfg.desc,this.rewardScroll.datas=t.cfg.reward,this.schedule.string=h.formatStr("%s/%s",t.count,t.cfg.condition[2]),this.pb.progress=t.count/t.cfg.condition[2],t.state==m.CanGet?(this.received.active=!1,this.btnGotoRecharge.active=!1,this.btnGet.active=!0):t.state==m.HadGet?(this.received.active=!0,this.btnGotoRecharge.active=!1,this.btnGet.active=!1):(this.received.active=!1,this.btnGotoRecharge.active=!0,this.btnGet.active=!1)}}class G extends l{constructor(...t){super(...t),this.itemGridNode=void 0,this.itemGrid=void 0}onInit(){this.itemGridNode=r.findChild(this.node,"itemGrid"),this.itemGrid=new d(this.view,this.itemGridNode)}onRender(t,i){this.itemGrid.SetItemId(t[0],t[1])}}a._RF.pop()}}}));
